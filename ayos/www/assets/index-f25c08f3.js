(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const c=new WebSocket(`ws://${location.hostname}:8082`),a=`http://${location.hostname}/v3`;function u(t){let e=Math.floor(t/864e4),n=Math.floor(t%864e4/36e4),r=Math.floor(t%36e4/6e3);return e===0?e="":e===1?e=`${e} day`:e=`${e} days`,n===0?n="":n===1?n=`${n} hr and`:n=`${n} hrs and`,r===1?r=`${r} min`:r=`${r} mins`,`${e} ${n} ${r}`}function d(t,e){document.querySelector("#bw-ds-current").innerText=t,document.querySelector("#bw-us-current").innerText=e}async function l(){m("bandwidth-spinner");const t=await y("/dashboard");document.querySelector("#bw-ds-today").innerText=t.bw_ds_day,document.querySelector("#bw-us-today").innerText=t.bw_us_day,document.querySelector("#bw-ds-month").innerText=t.bw_ds_month,document.querySelector("#bw-us-month").innerText=t.bw_us_month,document.querySelector("#month").innerText=t.month;const e=t.internet,n=document.querySelector("#internet-status");let r=parseInt(t.uptime);e==="1"?n.innerHTML=`<span class="text-green-600 font-semibold">Up and running</span><br /><p class="pt-2 text-gray-500 text-sm">${u(r)}</p>`:n.innerHTML='<span class="text-red-600 font-semibold">Unable to connect to the internet</span>',f()}function m(t){const e=document.getElementById(t),n=document.createElement("span");n.classList="text-center loading loading-spinner mt-10";const r=document.createElement("div");r.classList="w-full text-center div-spinner",r.appendChild(n),e.appendChild(r)}function f(){document.querySelector(".loading-spinner").remove(),document.querySelector(".div-spinner").remove()}function p(t){return new Promise(e=>setTimeout(e,t))}async function h(){await p(1e3),c.onmessage=t=>{const e=JSON.parse(t.data);d(e.ds_bw,e.us_bw);const n=e.results;n.forEach(o=>{updateBwDevice(o.ds,o.us,o.id)});const r=document.querySelector("#total-online");r.innerText=n.length}}document.addEventListener("DOMContentLoaded",()=>{l(),h()});async function y(t){return await(await fetch(`${a}${t}`)).json()}
